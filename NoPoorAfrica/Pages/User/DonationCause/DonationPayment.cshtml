@page
@model NoPoorAfrica.Pages.User.DonationCause.DonationPaymentModel
@using NoPoorAfrica.Utility
@using Microsoft.Extensions.Options
@inject IOptions<NoPoorAfrica.Utility.StripeSettings> Stripe


<form method="post">
	<br />
		<div class="backgroundWhiteBorder">
			<div class="container">
				<div class="card">
					<div class="card-header bg-dark text-light ml-0 row container">
						<div class="col-6">
							Donation to @Model.DonationCauseObj.Title
						</div>
					</div>
					<div class="card-body">
						<div class="container rounded p-2">
							<div class="row">
								<div class="col-12 col-lg-6 pb-4">
									<div class="row">
										<h4 class="d-flex justify-content-between align-items-center mb-3">
											<span class="text-info">Donor Details:</span>
										</h4>
									</div>
									<div class="row my-1">
										<div class="col-3">
											<label>Name</label>
										</div>
										<div class="col-9">
											<input id="txtName" asp-for="@Model.DonationDetails.DonorName" type="text" class="form-control" />
										</div>
									</div>
									<div class="row my-1">
										<div class="col-3">
											<label>Donation Amount</label>
										</div>
										<div class="col-9">
											<input id="txtPhone" asp-for="@Model.DonationDetails.DonationTotal" type="text" class="form-control" />
										</div>
									</div>
									<div class="row my-1">
										<div class="col-3">
											<label>Email</label>
										</div>
										<div class="col-9">
											<input id="txtEmail" value="" asp-for="@Model.DonationDetails.Email" type="text" class="form-control" />
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="card-footer">
						<div class="row">
							<div class="col-12 col-md-4 offset-md-8">
								@{
									var OrderTotalForStripe = Math.Round((Model.DonationDetails.DonationTotal * 100), 0); //convert to cents
								}
								<script src="https://checkout.stripe.com/checkout.js"
										class="stripe-button"
										data-key="@Stripe.Value.PublishableKey"
										data-amount="@OrderTotalForStripe"
										data-name="No Poor Africa"
										data-label="Place Donation"
										data-description="No Poor Among Us"
										data-locale="auto"
										data-allow-remember-me="false"
										data-image="https://stripe.com/img/documentation/checkout/marketplace.png">
								</script>

								<script>document.getElementsByClassName("stripe-button-el")[0].style.display = 'none';</script>
								<button type="submit" id="btnPlaceOrder" onclick="return validateInput()" value="Place Order" class="btn btn-success form-control">Place Donation Payment</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
</form>